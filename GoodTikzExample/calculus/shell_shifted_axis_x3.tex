\begin{tikzpicture}
\begin{axis}[
    axis lines=center,
    xlabel={$x$}, ylabel={$y$},
    domain=-0.5:3.5, samples=100,
    xmin=-0.5, xmax=3.5,
    ymin=-0.5, ymax=2.5,
    width=10cm, height=7cm,
    xtick={0,1,2,3},
    ytick={0,1,2},
    legend pos=north west
]
% Region under y=x on [0,2]
\addplot[name path=f, blue, thick, domain=0:2] {x};
\addplot[name path=axis, draw=none, domain=0:2] {0};
\addplot[fill=blue!20, opacity=0.5] fill between[of=f and axis, soft clip={domain=0:2}];

% Axis of rotation x=3
\addplot[red, dashed, thick, domain=-0.5:2.5] ({3},{x});

% Bounding line x=2
\addplot[gray, dotted, thick, domain=0:2] ({2},{x});

% Labels
\addlegendentry{$y=x$}
\addlegendentry{$x=3$}
\end{axis}
\end{tikzpicture}
